<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- BURAI JAR Creation Script
     
     This file creates a runnable JAR file for the BURAI project.
     Originally created by Eclipse Runnable JAR Export Wizard.
     
     Purpose:
       - Create executable JAR file (burai.jar) from compiled classes
       - Bundle all dependencies into a single JAR file
     
     Usage:
       ant -f bin/build.xml              # Create JAR from existing class files
     
     Prerequisites:
       - Source files must be compiled first (class/ directory must exist)
       - Use build_compile.xml to compile sources first
     
     Note: This file has been updated from the Eclipse-generated version to use
           relative paths instead of hardcoded Windows paths (D:/git/burai).
           The main class is burai.app.QEFXMain.
-->
<project default="create_run_jar" name="Create Runnable Jar for Project BURAI" basedir="..">
    <!--this file was created by Eclipse Runnable JAR Export Wizard-->
    <!--ANT 1.7 is required                                        -->
    <!--define folder properties-->
    <property name="dir.buildfile" value="bin"/>
    <property name="dir.jarfile" value="${dir.buildfile}"/>
    <property name="class.dir" value="class"/>
    <property name="lib.dir" value="lib"/>
    
    <!-- Path to JavaFX libs. Adjust if you installed JavaFX in another location.
         If you installed via `sudo apt install openjfx`, use /usr/share/openjfx/lib -->
    <property name="path.to.fx" value="/usr/share/openjfx/lib"/>
    
    <target name="check-javafx">
        <condition property="javafx.available">
            <available file="${path.to.fx}/javafx.base.jar"/>
        </condition>
    </target>
    
    <target name="create_run_jar" depends="check-javafx">
        <fail unless="javafx.available">
            
    ERROR: JavaFX libraries not found at ${path.to.fx}
    
    Please install OpenJFX:
      Ubuntu/Debian: sudo apt install openjfx
      
    Or set the path.to.fx property to your JavaFX installation:
      ant -Dpath.to.fx=/path/to/javafx/lib -f bin/build.xml
        </fail>
        <jar destfile="${dir.jarfile}/burai.jar" filesetmanifest="mergewithoutmain">
            <manifest>
                <attribute name="Main-Class" value="burai.app.QEFXMain"/>
                <attribute name="Class-Path" value="."/>
            </manifest>
            <fileset dir="${class.dir}"/>
            <zipfileset excludes="META-INF/*.SF" src="${lib.dir}/exp4j-0.4.6.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="${lib.dir}/gson-2.6.1.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="${lib.dir}/jcodec-0.2.0.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="${lib.dir}/jcodec-javase-0.2.0.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="${lib.dir}/jsch-0.1.54.jar"/>
            <!-- Include JavaFX libraries, excluding module-info.class to avoid conflicts -->
            <zipfileset excludes="META-INF/*.SF,module-info.class" src="${path.to.fx}/javafx.base.jar"/>
            <zipfileset excludes="META-INF/*.SF,module-info.class" src="${path.to.fx}/javafx.controls.jar"/>
            <zipfileset excludes="META-INF/*.SF,module-info.class" src="${path.to.fx}/javafx.fxml.jar"/>
            <zipfileset excludes="META-INF/*.SF,module-info.class" src="${path.to.fx}/javafx.graphics.jar"/>
            <zipfileset excludes="META-INF/*.SF,module-info.class" src="${path.to.fx}/javafx.media.jar"/>
            <zipfileset excludes="META-INF/*.SF,module-info.class" src="${path.to.fx}/javafx.swing.jar"/>
            <zipfileset excludes="META-INF/*.SF,module-info.class" src="${path.to.fx}/javafx.web.jar"/>
        </jar>
    </target>
</project>
